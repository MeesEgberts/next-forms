---
sidebar_position: 4
---

# Middleware

The `middleware` option in `next-forms` allows you to intercept and validate incoming server actions before they're processed. This is especially useful for enforcing authentication, authorization, or other request-level logic.

```tsx title="app/_lib/utils/server-actions.ts"
import { createClient } from "next-forms";

export const createProtectedServerAction = createClient({
  // highlight-start
  middleware: () => {
    const isAuthenticated = false; // replace with actual authentication logic

    if (!isAuthenticated) {
      return {
        message: "unauthorized",
      };
    }
  },
  // highlight-end
});
```

This middleware runs before your server action executes. It's a great place to add logic like role-based access control, request logging, or feature flags.